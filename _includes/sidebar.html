<!-- _includes/sidebar.html -->
<nav id="site-sidebar" class="sidebar" aria-label="Sidebar navigation">
  <div class="sidebar-inner">
    <button id="sidebar-toggle" class="sidebar-toggle" aria-expanded="true" aria-controls="sidebar-list">
      â˜°
    </button>

    <ul id="sidebar-list" class="sidebar-list">
      {% assign nav = site.data.navigation %}
      {% for section in nav %}
        <li class="sidebar-section">
          <button class="section-toggle" aria-expanded="false">{{ section.title }}</button>
          {% if section.items %}
            <ul class="section-items">
              {% for item in section.items %}
                {% if item.items %}
                  <!-- nested group -->
                  <li class="nav-group">
                    <button class="group-toggle" aria-expanded="false">{{ item.title }}</button>
                    <ul class="group-items">
                      {% for sub in item.items %}
                        <li class="nav-item {% if page.url == sub.url or page.url == sub.url | append: 'index.html' %}active{% endif %}">
                          <a href="{{ sub.url }}">{{ sub.title }}</a>
                        </li>
                      {% endfor %}
                    </ul>
                  </li>
                {% else %}
                  <li class="nav-item {% if page.url == item.url or page.url == item.url | append: 'index.html' %} active{% elsif page.url contains item.url and item.url != '/' %} active-parent{% endif %}">
                    <a href="{{ item.url }}">{{ item.title }}</a>
                  </li>
                {% endif %}
              {% endfor %}
            </ul>
          {% endif %}
        </li>
      {% endfor %}
    </ul>
  </div>
</nav>
